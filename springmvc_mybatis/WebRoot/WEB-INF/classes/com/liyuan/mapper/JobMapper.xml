<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.liyuan.mapper.JobMapper" >
	<resultMap id="jobtype" type="com.liyuan.po.JobTypeEntity">
		<result column="c_id" jdbcType="VARCHAR" property="c_id"/>
		<result column="c_jobtype1" jdbcType="VARCHAR" property="c_type1"/>
		<result column="c_jobtype2" jdbcType="VARCHAR" property="c_type2"/>
		<result column="c_jobtype3" jdbcType="VARCHAR" property="c_type3"/>
		<result column="n_code" jdbcType="INTEGER" property="n_code"/>
	</resultMap>
	
	<resultMap id="jobinfo" type="com.liyuan.po.JobInfoEntity">
		<result column="c_id" jdbcType="VARCHAR" property="c_id"/>
		<result column="n_code" jdbcType="INTEGER" property="n_code"/>
		<result column="c_zwmc" jdbcType="VARCHAR" property="c_zwmc"/>
		<result column="n_gzxz" jdbcType="INTEGER" property="n_gzxz"/>
		<result column="n_yx" jdbcType="INTEGER" property="n_yx"/>
		<result column="n_gzjy" jdbcType="INTEGER" property="n_gzjy"/>
		<result column="n_xlyq" jdbcType="INTEGER" property="n_xlyq"/>
		<result column="c_zwms" jdbcType="VARCHAR" property="c_zwms"/>
		<result column="c_gzdz" jdbcType="VARCHAR" property="c_gzdz"/>
		<result column="c_jsjlyx" jdbcType="VARCHAR" property="c_jsjlyx"/>
		<result column="n_llcs" jdbcType="INTEGER" property="n_llcs"/>
		<result column="n_zt" jdbcType="INTEGER" property="n_zt"/>
		<result column="dt_fbsj" jdbcType="TIMESTAMP" property="dt_fbsj"/>
		<result column="dt_fbsj" jdbcType="VARCHAR" property="c_fbzid"/>
	</resultMap>
  <select id="selectJobtype" resultMap="jobtype">
  	select * from db_test.t_jobtype
  </select>
  
  <insert id="insertJobinfi">
  	insert into db_test.t_jobinfo
  	 (c_id,n_code,c_zwmc,n_gzxz,n_yx,n_gzjy,n_xlyq,c_zwms,c_gzdz,c_jsjlyx,dt_fbsj,n_zt,c_fbzid,n_yxzt) 
  	 values 
  	 (#{c_id},#{n_code},#{c_zwmc},#{n_gzxz},#{n_yx},#{n_gzjy},#{n_xlyq},#{c_zwms},
  	 #{c_gzdz},#{c_jsjlyx},#{dt_fbsj},#{n_zt},#{c_fbzid},#{n_yxzt})
  </insert>
  
  <select id="selectJob" resultMap="jobinfo">
  	select c_id,n_code,c_zwmc,n_gzxz,n_yx,n_gzjy,
  	n_xlyq,c_zwms,c_gzdz,c_jsjlyx,n_llcs,n_zt,dt_fbsj,c_fbzid
  	from db_test.t_jobinfo
  	where c_id=#{c_id}
  </select>
  
  <select id="selectHotJob" resultMap="jobinfo">
  	select c_id,n_code,c_zwmc,n_gzxz,n_yx,n_gzjy,n_xlyq,c_zwms,
  	c_gzdz,c_jsjlyx,n_llcs,n_zt,dt_fbsj,dt_fbsj from db_test.t_jobinfo 
  	where n_yxzt=1
  	order by n_llcs desc
  	limit 0,20
  </select>
  
   <select id="selectNewJob" resultMap="jobinfo">
  	select c_id,n_code,c_zwmc,n_gzxz,n_yx,n_gzjy,n_xlyq,c_zwms,
  	c_gzdz,c_jsjlyx,n_llcs,n_zt,dt_fbsj,dt_fbsj from db_test.t_jobinfo 
  	where n_yxzt=1
  	order by dt_fbsj desc
  	limit 0,20
  </select>
  
  <select id="selectSearchJob">
  	select c_id,n_code,c_zwmc,n_gzxz,n_yx,n_gzjy,n_xlyq,c_zwms,
  	c_gzdz,c_jsjlyx,n_llcs,n_zt,dt_fbsj,dt_fbsj from db_test.t_jobinfo 
  	<where>
  		n_yxzt=1
  		<if test="c_nr!='' ">
  		AND	c_zwmc like %${c_nr}%
  		</if>
  		<if test="n_gzjy!=0">
  			AND	n_gzjy=#{n_gzjy}
  		</if>
  		<if test="n_xlyq!=0">
  			AND n_xlyq=#{n_xlyq}
  		</if>
  		<if test="n_gzxz!=0">
  			AND n_gzxz=#{n_gzxz}
  		</if>
  		<if test="dt_fbsj!=''">
			dt_fbsj>#{dt_fbsj}
  		</if>
  		<if test="n_yxstart!=0">
  			AND n_yx>#{n_yxstart}
  		</if>
  		<if test="n_yxend!=0">
  			AND n_yx<#{n_yxend}
  		</if>
  	</where>
  		limit #{pagesize,jdbcType=INTEGER} 
  		offset #{offset,jdbcType=INTEGER};
  </select>
  
  <select id="selectyxJob" resultMap="jobinfo">
  	 	select c_id,n_code,c_zwmc,n_gzxz,n_yx,n_gzjy,n_xlyq,c_zwms,
  		c_gzdz,c_jsjlyx,n_llcs,n_zt,dt_fbsj,dt_fbsj from db_test.t_jobinfo 
  		where c_fbzid=#{c_fbzid} AND n_yxzt=1
  </select>
  
    <select id="selectwxJob" resultMap="jobinfo">
  	 	select c_id,n_code,c_zwmc,n_gzxz,n_yx,n_gzjy,n_xlyq,c_zwms,
  		c_gzdz,c_jsjlyx,n_llcs,n_zt,dt_fbsj,dt_fbsj from db_test.t_jobinfo 
  		where c_fbzid=#{c_fbzid} AND n_yxzt=2
  </select>
  
  <update id="updateXxJob">
  	update db_test.t_jobinfo set n_yxzt=2 where c_id=#{c_id}
  </update>
  
    <update id="updateSxJob">
  		update db_test.t_jobinfo set n_yxzt=1 where c_id=#{c_id}
  	</update>
  
  	<delete id="deleteJob">
  		delete from db_test.t_jobinfo where c_id=#{c_id}
  	</delete>
  
</mapper>